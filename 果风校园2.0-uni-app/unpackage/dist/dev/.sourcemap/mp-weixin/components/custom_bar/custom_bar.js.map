{"version":3,"sources":[null,"webpack:///D:/HBuilderProjects/果风校园2.0-uni-app/components/custom_bar/custom_bar.vue?e1fc","webpack:///D:/HBuilderProjects/果风校园2.0-uni-app/components/custom_bar/custom_bar.vue?69fb","webpack:///D:/HBuilderProjects/果风校园2.0-uni-app/components/custom_bar/custom_bar.vue?d418","uni-app:///components/custom_bar/custom_bar.vue","webpack:///D:/HBuilderProjects/果风校园2.0-uni-app/components/custom_bar/custom_bar.vue?faaa","webpack:///D:/HBuilderProjects/果风校园2.0-uni-app/components/custom_bar/custom_bar.vue?6d00"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACsM;AACtM,gBAAgB,2MAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsxB,CAAgB,0wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACc1yB;AACA,oBADA;AAEA,MAFA,kBAEA;AACA;AACA,cADA;AAEA,0CAFA;AAGA,8CAHA;AAIA,0CAJA;AAKA,8CALA;AAMA,0CANA;AAOA,8CAPA;;AASA,cATA;AAUA;AACA,mBADA;AAEA,iBAFA,EAEA;AACA,iBAHA,EAGA;AACA,mBAJA,EAIA;AACA,gBALA,EAKA;AACA;AACA,8BAPA,EAOA;AACA,2BARA,EAVA;;AAoBA,eApBA;;AAsBA,GAzBA;AA0BA,sBA1BA;AA2BA,SA3BA,qBA2BA;AACA;AACA;AACA,GA9BA;AA+BA,QA/BA,oBA+BA;;AAEA,GAjCA;AAkCA;AACA;AACA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA,0BAHA;AAIA,2EAJA;AAKA,mFALA;AAMA,mFANA;AAOA;AACA;AACA;AACA;AACA,KAdA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA,0EADA,EACA;AACA,sBAFA;AAGA;AACA,4CADA;AAEA,qCAFA;AAGA,6BAHA,EAHA;;AAQA;AACA,6DADA,CACA;AADA,SARA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA,wCADA;AAEA,sCAFA;AAGA,oCAHA;AAIA,sCAJA;AAKA,oCALA;AAMA;AACA;AACA;AACA,sFADA;AAEA;AACA,uCADA,EAFA;;AAKA;AACA,qEADA,EALA;;AAQA,8BARA;AASA,gCATA;AAUA;AACA;AACA;AACA;AACA,kCADA;AAEA,qDAFA;AAGA,uCAHA;;AAKA,mBANA,MAMA;AACA;AACA;AACA;AACA,iBAtBA;AAuBA;AACA;AACA,iCADA;AAEA,uCAFA;;AAIA,iBA5BA;AA6BA;AACA;AACA,qDADA;;AAGA,iBAjCA;;AAmCA;AACA;AACA,6BADA;AAEA,2BAFA;AAGA,iCAHA;AAIA,uBAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDADA;;AAGA;AACA,iBAhBA;;AAkBA,aA9DA;AA+DA;AACA;AACA;AACA,aAlEA;;AAoEA,SApFA;;AAsFA,KA1GA;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CADA;AAEA;AACA;;AAEA;;AAEA,OAJA,MAIA;AACA;;AAEA,OAHA,MAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8EADA,EACA;AACA;AACA,8BADA;AAEA,qCAFA;AAGA,sCAHA;AAIA,sCAJA;AAKA,mCALA;AAMA,2CANA;AAOA,sCAPA;AAQA,0DARA;AASA,4BATA,CASA;AATA,SAFA;AAaA,sBAbA;AAcA;AACA,6DADA,EAdA;;AAiBA,wBAjBA;AAkBA;AACA;AACA;AACA;AACA,SAtBA;AAuBA,YAvBA,gBAuBA,GAvBA,EAuBA;AACA;AACA,SAzBA;;AA2BA,KA1KA;;AA4KA,eA5KA,uBA4KA,IA5KA,EA4KA;AACA;AACA;AACA;AACA;AACA,8EADA,EACA;AACA;AACA,+BADA;AAEA,qCAFA;AAGA,mDAHA,EAFA;;AAOA,sBAPA;AAQA;AACA,6DADA,EARA;;AAWA,wBAXA;AAYA;AACA;AACA;AACA;AACA,SAhBA;AAiBA,YAjBA,gBAiBA,GAjBA,EAiBA;AACA;AACA,SAnBA;;;AAsBA,KAtMA;;AAwMA,cAxMA,sBAwMA,CAxMA,EAwMA;AACA;AACA;AACA;AACA;AACA,iDADA;;AAGA,OALA,MAKA;AACA;AACA;AACA;AACA,6BADA;AAEA,8BAFA;;AAIA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDADA;;AAGA;AACA;AACA;AACA;AACA,iCADA;AAEA,kCAFA;;AAIA;AACA;AACA;AACA,OA1BA,MA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDADA;;AAGA,eALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA1BA,MA0BA;AACA;AACA;AACA;AACA,OAhCA,MAgCA;AACA;AACA,2BADA;AAEA,6BAFA;;AAIA;AACA,KA/QA,EAlCA,E;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA+mC,CAAgB,2jCAAG,EAAC,C;;;;;;;;;;;ACAnoC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/custom_bar/custom_bar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./custom_bar.vue?vue&type=template&id=594d52b8&\"\nvar renderjs\nimport script from \"./custom_bar.vue?vue&type=script&lang=js&\"\nexport * from \"./custom_bar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./custom_bar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/custom_bar/custom_bar.vue\"\nexport default component.exports","export * from \"-!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./custom_bar.vue?vue&type=template&id=594d52b8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./custom_bar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./custom_bar.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view style=\"display: flex; justify-content:center; position:fixed; bottom: 0;\">\r\n\t\t\t<image class=\"customstep_img1\" id=\"select_good\" @click=\"click_step\" mode=\"aspectFit\"\r\n\t\t\t\t:src=\"step=='select_good'?step1:unstep1\"></image>\r\n\t\t\t<image class=\"customstep_img2\" id=\"order_plan\" @click=\"click_step\" mode=\"aspectFit\"\r\n\t\t\t\t:src=\"step=='order_plan'?step2:unstep2\"></image>\r\n\t\t\t<image class=\"customstep_img3\" id=\"pay_plan\" @click=\"click_step\" mode=\"\"\r\n\t\t\t\t:src=\"step=='pay_plan'?step3:unstep3\"></image>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"custom_bar\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstep: '',\r\n\t\t\t\tstep1: \"/static/img/customstep1.svg\",\r\n\t\t\t\tunstep1: \"/static/img/customstep1un.svg\",\r\n\t\t\t\tstep2: \"/static/img/customstep2.svg\",\r\n\t\t\t\tunstep2: \"/static/img/customstep2un.svg\",\r\n\t\t\t\tstep3: \"/static/img/customstep3.svg\",\r\n\t\t\t\tunstep3: \"/static/img/customstep3un.svg\",\r\n\t\t\t\t\r\n\t\t\t\tplan: '',\r\n\t\t\t\torder: {\r\n\t\t\t\t\tuser_id:'',\r\n\t\t\t\t\tgoods: '', //商品信息\r\n\t\t\t\t\tphone: \"\", //电话\r\n\t\t\t\t\taddress: \"\", //地址\r\n\t\t\t\t\tprice: 0, //总价格\r\n\t\t\t\t\t// time: '',//订单时间\r\n\t\t\t\t\tNotification_Check: '',//订单提醒\r\n\t\t\t\t\torder_status: '未支付',\r\n\t\t\t\t},\r\n\t\t\t\tgoods: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\tprops: ['step_name'],\r\n\t\tcreated() {\r\n\t\t\t// 此处注意！！！建议在组件中建立一个值来间接使用父组件中的值，最好不要直接在子组件中修改父组件传入的值\r\n\t\t\tthis.step = this.step_name\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//获取时间函数\r\n\t\t\tgetTime: function() {\r\n\t\t\t\tvar date = new Date(),\r\n\t\t\t\t\tyear = date.getFullYear(),\r\n\t\t\t\t\tmonth = date.getMonth() + 1,\r\n\t\t\t\t\tday = date.getDate(),\r\n\t\t\t\t\thour = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours(),\r\n\t\t\t\t\tminute = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes(),\r\n\t\t\t\t\tsecond = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n\t\t\t\tmonth >= 1 && month <= 9 ? (month = \"0\" + month) : \"\";\r\n\t\t\t\tday >= 0 && day <= 9 ? (day = \"0\" + day) : \"\";\r\n\t\t\t\tvar timer = year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;\r\n\t\t\t\treturn timer;\r\n\t\t\t},\r\n\t\t\t// 支付订单方法\r\n\t\t\tpay_bill:function(plan){\r\n\t\t\t\t console.log(plan)\r\n\t\t\t\t var that = this\r\n\t\t\t\t//与服务器交互---支付接口\r\n\t\t\t\tuni.request({\r\n\t\t\t\t  url: getApp().globalData.server + '/index.php/Home/Pay/make_order',\t// 微信小程序支付\r\n\t\t\t\t  method: \"POST\",\r\n\t\t\t\t  data: {\r\n\t\t\t\t\topenid: getApp().globalData.openid,\r\n\t\t\t\t\tdata_total: plan.plan_price,\r\n\t\t\t\t\tcrsNo: plan.plan_id,\r\n\t\t\t\t  },\r\n\t\t\t\t  header: {\r\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded' // 默认值\r\n\t\t\t\t  },\r\n\t\t\t\t  success: function (res) {  //后端返回的数据\r\n\t\t\t\t\tvar there = that\r\n\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tconsole.log(data[\"timeStamp\"]);\r\n\t\t\t\t\twx.requestPayment({\r\n\t\t\t\t\t  timeStamp: data['timeStamp'],\r\n\t\t\t\t\t  nonceStr: data['nonceStr'],\r\n\t\t\t\t\t  package: data['package'],\r\n\t\t\t\t\t  signType: data['signType'],\r\n\t\t\t\t\t  paySign: data['paySign'],\r\n\t\t\t\t\t  success: function (res) {\r\n\t\t\t\t\t\t//支付成功后调用修改订单支付状态接口\r\n\t\t\t\t\t\twx.request({\r\n\t\t\t\t\t\t  url: getApp().globalData.server + '/index.php/Home/GuoFeng/modifyplan',\r\n\t\t\t\t\t\t  data:{\r\n\t\t\t\t\t\t\tplan_id: plan.plan_id\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t  header: {\r\n\t\t\t\t\t\t\t'content-type': \"application/x-www-form-urlencoded\"\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t  method: 'POST',\r\n\t\t\t\t\t\t  dataType: 'json',\r\n\t\t\t\t\t\t  success:function(res){\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif(res.data.error_code != 0){\r\n\t\t\t\t\t\t\t  wx.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'哎呀~',\r\n\t\t\t\t\t\t\t\tcontent:'出错了呢！' + res.data.msg,\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t}else if(res.data.error_code == 0){\r\n\t\t\t\t\t\t\t  // console.log(res.data.data)\r\n\t\t\t\t\t\t\t  console.log(\"方案支付成功！\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t  fail:function(res){\r\n\t\t\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t\t  title:'哎呀~~',\r\n\t\t\t\t\t\t\t  content:'网络不在状态呢！'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t  },\r\n\t\t\t\t\t\t  complete:function(res){\r\n\t\t\t\t\t\t\twx.hideLoading({\r\n\t\t\t\t\t\t\t  success: (res) => {},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tvar here = there\r\n\t\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t  title: '支付成功',\r\n\t\t\t\t\t\t  content: '',\r\n\t\t\t\t\t\t  showCancel: false,\r\n\t\t\t\t\t\t  success (res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t  console.log('用户点击确定')\r\n\t\t\t\t\t\t\t  // console.log(here.order)\r\n\t\t\t\t\t\t\t  getApp().globalData.plan = plan\r\n\t\t\t\t\t\t\t  console.log(plan)\r\n\t\t\t\t\t\t\t  // 支付成功则跳转订单界面\r\n\t\t\t\t\t\t\t  here.step = \"pay_plan\"\r\n\t\t\t\t\t\t\t  uni.redirectTo({\r\n\t\t\t\t\t\t\t  \turl: \"/pages/pay_plan/pay_plan\" \r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t  fail: function (res) {\r\n\t\t\t\t\t\tconsole.log(\"小程序这边调起支付失败啦\")\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t})\r\n\t\t\t\t   }\r\n\t\t\t\t });\r\n\t\t\t},\r\n\t\t\tpush_order:function() {\r\n\t\t\t\tthis.order.user_id=getApp().globalData.openid\r\n\t\t\t\tthis.goods = getApp().globalData.custom_cert\r\n\t\t\t\tthis.plan = getApp().globalData.select_plan\r\n\t\t\t\t// //获取时间函数---\r\n\t\t\t\t// this.order.time = this.getTime()\r\n\t\t\t\t//获取地址和电话\r\n\t\t\t\tthis.order.phone = getApp().globalData.position.phone\r\n\t\t\t\tthis.order.address = getApp().globalData.position.school + getApp().globalData.position.apartment +\r\n\t\t\t\t\tgetApp().globalData.position.dormitory\r\n\t\t\t\t//获取定制提醒信息\r\n\t\t\t\tif (this.plan == '方案一') {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.order.Notification_Check = getApp().globalData.Notification_Check.N1\r\n\t\t\t\t\t\t\r\n\t\t\t\t} else if (this.plan == '方案二') {\r\n\t\t\t\t\tthis.order.Notification_Check = getApp().globalData.Notification_Check.N2\r\n\t\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.order.Notification_Check = getApp().globalData.Notification_Check.N3\r\n\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t//获取当前方案的商品，放在订单数组中\r\n\t\t\t\tvar that = this\r\n\t\t\t\tfor (let i = 0; i < this.goods.length; i++) {\r\n\t\t\t\t\tvar item = this.goods[i]\r\n\t\t\t\t\tif (item.plan_name == that.plan) {\r\n\t\t\t\t\t\tthat.order.goods += item.goods_name + \" \"\r\n\t\t\t\t\t\tthat.order.price += Number(item.goods_price)\r\n\t\t\t\t\t\tconsole.log(that.order.goods)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.order)\r\n\t\t\t\tconsole.log(this.plan)\r\n\t\t\t\t\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: getApp().globalData.server + '/index.php/Home/GuoFeng/createplan',//确认订单，发送订单信息\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tplan_name: that.plan,\r\n\t\t\t\t\t\tuser_id: that.order.user_id,\r\n\t\t\t\t\t\tplan_goods: that.order.goods,\r\n\t\t\t\t\t\tplan_price: that.order.price,\r\n\t\t\t\t\t\tplan_time: that.getTime(),\r\n\t\t\t\t\t\tplan_position: that.order.address,\r\n\t\t\t\t\t\tplan_phone: that.order.phone,\r\n\t\t\t\t\t\tplan_Notification: that.order.Notification_Check,\r\n\t\t\t\t\t\tplan_status: '未支付'\t\t// 生成未支付订单\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': \"application/x-www-form-urlencoded\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t// 调用支付接口\r\n\t\t\t\t\t\tthat.pay_bill(res.data.data)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchange_plan(plan){\r\n\t\t\t\tconsole.log(\"已存在方案，开始修改方案\")\r\n\t\t\t\tconsole.log(plan)\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: getApp().globalData.server + '/index.php/Home/GuoFeng/changeplan',//确认订单，发送订单信息\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tplan_id: plan.plan_id,\r\n\t\t\t\t\t\tplan_goods: plan.plan_goods,\r\n\t\t\t\t\t\tplan_notification: plan.plan_notification\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': \"application/x-www-form-urlencoded\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t// 调用支付接口\r\n\t\t\t\t\t\tthat.pay_bill(plan)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tclick_step(e) {\r\n\t\t\t\tconsole.log(e.currentTarget.id)\r\n\t\t\t\tif (e.currentTarget.id == 'select_good' && this.step == 'order_plan') {\r\n\t\t\t\t\tthis.step = e.currentTarget.id\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: \"/pages/Custom_goods/Custom_goods\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (e.currentTarget.id == 'order_plan' && (this.step != \"order_plan\")) {\r\n\t\t\t\t\t// 这里首先进行判断，如果购物车里没有商品的话直接弹窗\r\n\t\t\t\t\tif (getApp().globalData.custom_cert.length == 0) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tcontent: \"请选择配送商品\",\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 如果购物车里有商品的话就通过遍历购物车里的商品判断是否存在该方案的商品\r\n\t\t\t\t\t\tfor (let i = 0; i < getApp().globalData.custom_cert.length; i++) {\r\n\t\t\t\t\t\t\tvar item = getApp().globalData.custom_cert[i]\r\n\t\t\t\t\t\t\tif (item.plan_name == getApp().globalData.select_plan) {\r\n\t\t\t\t\t\t\t\tthis.step = e.currentTarget.id\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/order_plan/order_plan\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (i == (getApp().globalData.custom_cert.length - 1)) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tcontent: \"请选择配送商品\",\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(e.currentTarget.id == 'pay_plan' && this.step == 'order_plan'){\r\n\t\t\t\t\t// 判断该用户是否已经生成该方案\r\n\t\t\t\t\tif (getApp().globalData.plan.length != 0){\r\n\t\t\t\t\t\tfor (let i=0; i<getApp().globalData.plan.length; i++){\r\n\t\t\t\t\t\t\tvar item = getApp().globalData.plan[i]\r\n\t\t\t\t\t\t\tconsole.log(item.plan_status)\r\n\t\t\t\t\t\t\tif (item.plan_name==getApp().globalData.select_plan){\r\n\t\t\t\t\t\t\t\t// 此处又分为两种情况，一是订单已支付，二是订单未支付（此处计划暂时只支持未支付方案的修改，已支付方案的修改涉及到后续的配送问题，比较麻烦）\r\n\t\t\t\t\t\t\t\tif(item.plan_status == \"已支付\"){\r\n\t\t\t\t\t\t\t\t\tthis.step = e.currentTarget.id\r\n\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\turl: \"/pages/pay_plan/pay_plan\"\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// 如果已有方案，则对现有方案进行修改：\r\n\t\t\t\t\t\t\t\t\t// 调用修改订单接口\r\n\t\t\t\t\t\t\t\t\tvar data = {}\r\n\t\t\t\t\t\t\t\t\tfor (let i=0; i<getApp().globalData.plan.length; i++){\r\n\t\t\t\t\t\t\t\t\t\tif (getApp().globalData.plan[i].plan_name == getApp().globalData.select_plan){\r\n\t\t\t\t\t\t\t\t\t\t\tdata = getApp().globalData.plan[i]\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.change_plan(data)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// 调用支付接口\r\n\t\t\t\t\t\tthis.push_order()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\tcontent: \"请先确认您的订单\",\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.customstep_img1 {\r\n\t\twidth: 250rpx;\r\n\t\theight: 100rpx;\r\n\t\tz-index: 3;\r\n\t\tposition: relative;\r\n\t\tleft: 45rpx;\r\n\t\tborder-radius: 80rpx 0 0 80rpx;\r\n\t}\r\n\r\n\t.customstep_img2 {\r\n\t\tz-index: 2;\r\n\t\twidth: 250rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\t.customstep_img3 {\r\n\t\twidth: 250rpx;\r\n\t\theight: 100rpx;\r\n\t\tz-index: 1;\r\n\t\tposition: relative;\r\n\t\tright: 45rpx;\r\n\t\tborder-radius: 0 80rpx 80rpx 0;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./custom_bar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./custom_bar.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1647310868073\n      var cssReload = require(\"D:/软件安装/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}